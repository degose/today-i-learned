## 로컬스토리지, 세션스토리지, 쿠키

* http://genesis8.tistory.com/220
* https://isme2n.github.io/devlog/2017/06/21/storage-cookie/

* 로컬스토리지와 세션스토리지는 HTML5에 추가된 저장소
* key, value 스토리지 형태
* 로컬스토리지 -> 지속적으로 필요한 자동로그인이나 설정값 데이터 등을 저장
* 세션스토리지 -> 간단한 입력폼 정보 저장
* 쿠키 -> 키-벨류 저장소, 만료 기한도 함께 있다. HTTP 요청시 사용자의 쿠키 정보가 서버로 전달되어 사용자를 구별한다.

#### 쿠키의 단점
- 용량 제한(4kb)
- 속도(매 HTTP요청마다 필요하지 않은 데이터를 포함되어 서버에 전달.)
- 보안 -> 별도의 암호화 없이 전달되기 때문에 요청이 도청장하면 사용자 정보도 쉽게 도난당할 위험이 있다.

#### 스토리지 장점
- 스토리지는 쿠키의 문제점을 보완하기 위해 나온것
- 용량이 비교적 크다. (한 사이트당 5mb)
- HTTP 요청 때 전달되지 않음.

#### 스토리지 단점
- 브라우저, 디바이스 등의 환경을 많이 탐 -> 제대로 작동을 하지 않을 수 있다.
- 그러므로 꼭 필요한 중요한 정보는 서버에서 관리를 하고, 스토리지에는 없어도 되지만 있으면 좋을만한 기능을 구현하는 것이 좋다.
 

* 쿠키란 HTTP 의 일종으로 사용자가 어떠한 웹사이트를 방문할 경우 그 사이트가 사용하고 있는 서버에서 인터넷 사용자의 컴퓨터에 설치하는 작은 기록 정보 파일을 말한다.
    * 이 기록 파일에 담긴 정보는 인터넷 사용자가 같은 웹사이트를 방문할 때마다 읽히고 수시로 새로운 정보로 바뀐다.
    * 오늘날 많은 서버 및 웹사이트들이 브라우저의 신속성을 위해 즐겨 쓰고 있다. 쿠키는 소프트 웨어가 아니다.
    * 상태 정보를 클라이언트에 저장하는 방식
    * 텍스트 정보, 최대 4KB의 텍스트 정보, 하나의사이트는 20개만 허용, 모든 사이트를 통틀어 300개로 제한 이것을 넘으면 오래된 쿠키부터 삭제 됨.
    * 적은 양의 데이터, ID, 최근 읽은 글, 최근 본 상품 과 같은 식별자를 저장할 때 사용하는 것이 적합
    * 서버에서 생성하여 클라이언트의 브라우저에서 관리하기 때문에 요청시 쿠키를 생성하고 브라우저를 닫을때 쿠키를 파괴.
    * 방문자의 정보를 방문자 컴퓨터의 메모리에 저장
* 세션
    * 상태정보를 웹 서버에 저장하는 방식
    * 일정 시간(브라우저를 통해 웹 서버에 접속한 시점으로부터 웹 브라우저를 종료함으로써 연결을 끝내는 시점)동안 같은 사용자(브라우저)로부터 들어오는 일련의 요구를 하나의 상태로 보고 그 상태를 일정하게 유지시키는 기술
    * 방문자가 웹서버에 접속해 있는 상태를 하나의 단위로 보고 세션이라고 칭한다.
    * 방문자의 요청에 따른 정보를 방문자 메모리에 저장하는 것이 아닌! 웹 서버가 세션 아이디 파일을 만들어 서비스가 돌아가고 있는 서버에 저장
* 웹 서버 동작 원리
    * 클라이언트가 HTTP 프로토콜을 사용하여 웹 서버로 요청(Request)을 한다.
    * 요청이란 웹브라우저 표시줄에 http://eee.eee.com이라고 입력하는 행위나 웹 사이트의 링크를 마우스로 클릭하는 행위를 말한다.
    * 웹서버는 해당 HTML을 웹 브라우저로 전송 해주고, 웹 브라우저는 응답(Response)받은 HTML을 파싱하여 사용자에게 보여주게 된다.
* 정적인 웹 사이트
    * 웹 서버에서 완성된 .html 파일을 가지고 있다가 클라이언트의 요청이 있을 시 해당 .html 파일을 돌려주는 형태이다.
    * 당연히 HTML 페이지의 내용들은 이미 결정되어 있으므로 클라이언트의 상태, 방문정보, 시각 등의 내용에 관계없이 항상 동일한 HTML 페이지를 보여준다.
* 동적인 웹 사이트
    * 사용자의 액션에 따라 웹사이트가 다르게 동작하는 것
    * 예를 들면 요즘 웹사이트는 거의 로그인이라는 인증과정을 거치게 되고, 로그인을 하면 ...님 환영합니다 라고 해주고, 또한 게시판은 검색어에 따라 다른 결과를 보여주게 되고, 사용자 입맛에 맞게 정렬도 할 수 있다. 
    * 사용자와 웹사이트가 서로 상호작용을 하는 웹 사이트
    * ASP, NET, JSP, ASP, PHP, CGI 등 여러가지가 있다.
    * 클라이언트가 요청을 하게 되면 웹서버는 요청에 대한 적절한 HTML을 새롭게 생성한다.
    * 요청에 대한 일련의 처리(로직수행)를 수행하게 되고 처리 결과를 다시 클라이언트에 돌려주게 되는데 동적인 웹 사이트라고 해도 클라이언트가 받는 최종 응답은 정적인 HTML 페이지이다.
* 상태 관리(State Management)
    * 사용자는 HTTP GET방식이나 HTTP POST 팡식을 사용하여 웹 서버로 페이지를 요청하게 되고, 웹 브라우저는 웹 서버에서 응답받은 HTML을 파싱하여 렌더링하게 된다.
    * 라운드트립(Round Trip)
    * 그런데 HTTP 프로토콜은 상태를 저장할 수 없는 프로토콜이다. 이 말은 클라이언트의 요청이 왔을 때 웹 서버는 해당 요청에 대한 응답인 HTML을 보내주고 연결을 끊어버린다. -> 페이지에 있는 사용자 입력정보나 페이지의 정보들이 모두 손실

